<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.73.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>testing&nbsp;&ndash;&nbsp;Philosophical Hacker</title><link rel="stylesheet" href="/css/core.min.5cc905347df78a876835000e5fe52ff5a25efea519bc261bf09e8820be0bbb3d9c8b5e67a7fe33e4e63e5b79b3bbba95.css" integrity="sha384-XMkFNH33iodoNQAOX&#43;Uv9aJe/qUZvCYb8J6IIL4Luz2ci15np/4z5OY&#43;W3mzu7qV"><link rel="alternate" type="application/rss+xml" href="/tags/testing/index.xml" title="Philosophical Hacker" /><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="testing" />
<script type="text/javascript">
  window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])};
  heap.load("2872977926");
</script>
<body><section id="header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><span class="site name">Philosophical Hacker</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/about/me">About</a><a class="nav item" href="/talk">Talks</a><a class="nav item" href="https://www%2eoreilly%2ecom/programming/free/rxjava-for-android-app-development%2ecsp?intcmp=il-prog-free-product-na_new_site_rxjava_for_android_app_development"target="_blank">RxJava O&#39;Reilly Book</a><a class="nav item" href="/note">Notes</a></nav></div></span></div></section><section id="content"><section class="article header"><h1>testing</h1></section><ul class="note list"><li class="item"><a class="note" href="/post/psa-dont-use-esprsso-idling-resources-like-this/">
            <p class="note title">PSA: Dont Use Espresso Idling Resources like Google does</p><p class="note date">2016-06-07</p><p class="note content">Roman Nurik: &hellip;That&rsquo;s actually one of the harder things with writing good sample code. People are going to be copying and pasting the heck out of it so you can&rsquo;t take those shortcuts that you sometimes hopefully aren&rsquo;t taking.
  Chet Haase: I always take the shortcuts. That&rsquo;s one of the more interesting things that the developer relations group does in general&hellip;we will put together tests and sample code for the features that we work but we really don&rsquo;t have the time to dive in deeply and do it in a real context.<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="tag" href="/tags/android/">android</a><a class="tag" href="/tags/testing/">testing</a></p></li><li class="item"><a class="note" href="/2015/07/17/making-a-tdd-based-hackernews-client-for-android/">
            <p class="note title">Making a TDD-based HackerNews client for Android</p><p class="note date">2015-07-17</p><p class="note content">I&rsquo;m using TDD to write a HackerNews client for Android. This post (and the ones that will likely follow it) share a little bit about some of the techniques I used to follow a TDD-based work-flow for developing this application. It also discusses the architecture that arises when Android apps are built with testability in mind from the ground up.
<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/Android/">Android</a><a class="tag" href="/tags/android/">android</a><a class="tag" href="/tags/testing/">testing</a></p></li><li class="item"><a class="note" href="/2015/07/14/why-static-references-to-application-contexts-are-probably-not-the-best-idea/">
            <p class="note title">Why Having Global Static References to Application Contexts is Probably not the Best Idea</p><p class="note date">2015-07-14</p><p class="note content">In my last post, I went over 6 things I wish I knew before I wrote my first Android app. One of the things I listed in that post was this:
  Don’t have static references to Contexts   The reason I warned against this is that static references to Contexts can cause memory leaks. An astute reader pointed out that a static reference to an application Context wouldn&rsquo;t cause a memory leak since the application Context is around for the lifetime the app is running anyway. I then qualified my warning by saying:
Note: Technically, you can hold a static reference to an application Context without causing a memory leak, but I wouldn’t recommend that you do that either. In this post, I want to say a little more about why think having and using a static reference to an application Context is less-than-ideal. I emphasize &ldquo;less-than-ideal&rdquo; in the previous sentence as a way of highlighting what I&rsquo;m not saying: I&rsquo;m not saying that a kitten dies every time you use a static reference to an application Context. Once again, @codestandards is hilarious and relevant here:
Please, for the sake of the kittens. pic.twitter.com/xaj7pNDVfH
&mdash; Code Standards (@codestandards) February 24, 2015  Instead, all I&rsquo;m doing in this post is offering a few points that suggest that using static references to Contexts is probably not the cleanest way of coding Android apps.
<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/Android/">Android</a><a class="tag" href="/tags/android/">android</a><a class="tag" href="/tags/testing/">testing</a></p></li><li class="item"><a class="note" href="/2015/07/09/6-things-i-wish-i-knew-before-i-wrote-my-first-android-app/">
            <p class="note title">6 Things I wish I Knew before I Wrote my first Android App</p><p class="note date">2015-07-09</p><p class="note content">My first app was terrible. It was so terrible, in fact, that I removed it from the store and I don&rsquo;t even bother listing it on my resume&rsquo; anymore. That app wouldn&rsquo;t have been so terrible if I knew a few things about Android development before I wrote it.
Here&rsquo;s a list of things to keep in mind as you&rsquo;re writing your first Android apps. These lessons are derived from actual mistakes that I made in the source code of my first app, mistakes that I&rsquo;ll be showing below. Keeping these things in mind will help you write an app that you can be a little prouder of.
Of course, if you&rsquo;re doing your job right as a student of Android development, you&rsquo;ll probably hate your app later regardless. As @codestandards says,
If the code you wrote a year ago doesn&#39;t seem bad to you, you&#39;re probably not learning enough.
&mdash; Code Standards (@codestandards) May 21, 2015  If you&rsquo;re an experienced Java developer, items 1, 2, and 5 probably won&rsquo;t be interesting to you. Items 3 and 4, on the other hand, might show you some cool stuff you can do with Android Studio that you might not have known about, even if you&rsquo;ve never been guilty of making the mistakes I demo in those items.
<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/Android/">Android</a><a class="tag" href="/tags/android/">android</a><a class="tag" href="/tags/testing/">testing</a></p></li><li class="item"><a class="note" href="/2015/07/08/my-response-to-hannes-dorfmann-on-the-circular-dependency-problem/">
            <p class="note title">My Response to Hannes Dorfmann on "the Circular Dependency Problem"</p><p class="note date">2015-07-08</p><p class="note content">In my last post, I argued that there are two disadvantages to Activities and Presenters. The first disadvantage is that they are often bloated classes. The second disadvantage is that these classes often have a circular dependency between themselves and their Views. Yesterday, Hannes Dorfmann made a comment on my post that was so thoughtful and excellent that I think its worth dedicating an entire post to responding to it.
<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/Android/">Android</a><a class="tag" href="/tags/android/">android</a><a class="tag" href="/tags/testing/">testing</a></p></li><li class="item"><a class="note" href="/2015/07/07/mvpr-a-flexible-testable-architecture-for-android-pt-1/">
            <p class="note title">MVPR: A Flexible, Testable Architecture for Android (Pt. 1)</p><p class="note date">2015-07-07</p><p class="note content">Thorough unit testing helps us improve the internal quality because, to be tested, a unit has to be structured to run outside the system in a test fixture. A unit test for an object needs to create the object, provide its dependencies, interact with it, and check that it behaved as expected. So, for a class to be easy to unit-test, the class must have explicit dependencies that can easily be substituted and clear responsibilities that can easily be invoked and verified. In software engineering terms, that means that the code must be loosely coupled and highly cohesive —in other words, well-designed. Steve Freeman and Nat Pryce, _Growing Object Oriented Software Guided by Tests_
Lately, I&rsquo;ve been working towards making Google&rsquo;s IO app unit testable. A part of the reason I&rsquo;m doing this is to test the claims that Freeman and Pryce make in the above quotation about unit testing. Although I&rsquo;m still not even done with refactoring one Activity in Google&rsquo;s IOSched app, I&rsquo;m already finding some truth to what they&rsquo;re saying.
The Activity that I&rsquo;ve been working on is the SessionDetailActivity. If you&rsquo;ve been following me for a while, you know exactly what Activity I&rsquo;m talking about, but if you&rsquo;re tuning in the first time, here&rsquo;s what the SessionDetailActivity UI looks like:

As I mentioned in the post that introduced this series, there have been several challenges to making the SessionDetailActivity unit testable. Unit testing its dynamically constructed views was a challenge that I discussed in my last post in this series, but in that post, I noted that my strategy for testing dynamically constructed views wasn&rsquo;t entirely clean because of a circular dependency between Views and Presenters.
This circular dependency is a symptom of a larger problem with how we structure our Android applications: both Activities and Presenters violate the principle of single responsibility. They are often responsible for at least two things: binding data to a View and responding to user input. This is a part of the reason why the SessionDetailActivity, a class that&rsquo;s supposed to serve as a model for Android development, is over 1000 lines long.
I think there&rsquo;s a better way to structure our applications. In the next few posts, I&rsquo;ll propose a new architecture that has the following properties:
  It breaks up the multiple responsibilities typically handled by Presenters and Activities
  It breaks the circular dependency that traditionally exists between Views on the one hand and Activities or Presenters on the other hand.
  It enables us to use constructor dependency injection for all of our objects that present data to the user and respond to user input.
  It makes our ui-related business logic classes easier to unit test, impossible to construct without the dependencies necessary to fulfill their responsibilities, and (slightly) more amenable to the use of composition and polymorphism to extend and/or modify object behavior.
  In this post, I will try to give some reasons why we might consider a new architecture for Android development in the first place.
<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/Android/">Android</a><a class="tag" href="/tags/android/">android</a><a class="tag" href="/tags/testing/">testing</a></p></li><li class="item"><a class="note" href="/2015/06/06/unit-testing-dynamically-constructed-views/">
            <p class="note title">Unit Testing Dynamically Constructed Views</p><p class="note date">2015-06-06</p><p class="note content">Some view hierarchies in Android are specified statically. The structure of these hierarchies does not change at run-time. Occasionally, we need to have dynamically constructed view hierarchies, hierarchies whose structure change at run-time. We might need to, for example, add or remove a view depending on some data we&rsquo;ve fetched or in response to some input. The SessionDetailActivity in Google&rsquo;s IOSched app has a dynamically constructed view hierarchy. The number of tags associated with a particular IO session determines how many tag views are added to the SessionDetailActivity's view hierarchy.

In this screenshot, the &ldquo;Distribute,&rdquo; &ldquo;Android,&rdquo; and &ldquo;Games&rdquo; tags are added to the view hierarchy based on the tags associated with the &ldquo;Going global with Google Play&rdquo; IO session. In this post, I&rsquo;ll outline an approach that I used to write the code that is both unit testable and able to dynamically construct the SesisonDetailActivity's view hierarchy. This post is a part of a series of parts in which I discuss how we can take steps towards making Google&rsquo;s IOSched app unit testable.
<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/Android/">Android</a><a class="tag" href="/tags/android/">android</a><a class="tag" href="/tags/testing/">testing</a></p></li><li class="item"><a class="note" href="/2015/05/31/towards-a-unit-testable-fork-of-googles-iosched-app/">
            <p class="note title">Towards A Unit Testable Fork of Google's IOSched App</p><p class="note date">2015-05-31</p><p class="note content">In my recent Against Android Unit Tests series, I discussed the difficulties of unit testing android applications and proposed a different way of building applications that would enhance their unit testability. My proposal in that series was really largely a rough sketch of what it would take to make parts of Google&rsquo;s IOSched app unit testable.
More recently, I&rsquo;ve started to fill in the details of that proposal by forking the IOSched repo and refactoring it to make it unit testable. In the next few posts, I&rsquo;ll be discussing some of the challenges that arose when attempting to make the SessionDetailActivity unit testable within the IOSched app. In this post, I want to provide a broad overview of the challenges I&rsquo;ll be discussing.
<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/Android/">Android</a><a class="tag" href="/tags/android/">android</a><a class="tag" href="/tags/testing/">testing</a></p></li><li class="item"><a class="note" href="/2015/05/29/making-the-most-of-android-studios-unit-testing-support/">
            <p class="note title">An Introduction to Unit Testing on Android</p><p class="note date">2015-05-29</p><p class="note content">Yesterday at IO Extended Orlando, I gave a talk on testing. What follows is a written version of the presentation I gave.

Android 1.2 introduced unit testing support. Now, we can run junit tests on the jvm while we&rsquo;re developing our apps. During my talk, we&rsquo;ll discuss the following questions:
  Why should anyone care about this new feature?
  What the heck is unit testing anyways?
  Briefly, I&rsquo;ll also mention some of the challenges of writing unit tests for Android.
<span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/Android/">Android</a><a class="tag" href="/tags/android/">android</a><a class="tag" href="/tags/testing/">testing</a></p></li><li class="item"><a class="note" href="/2015/05/22/what-ive-learned-from-trying-to-make-an-android-app-unit-testable/">
            <p class="note title">What I've Learned From Trying to Make An Android App Unit Testable</p><p class="note date">2015-05-22</p><p class="note content">For the past few posts, I&rsquo;ve introduced and showed how we would apply The Square Way of building Android applications. The primary motivation for The Square Way was to increase the unit testability of our applications. As I stated in the introduction to this series, most tests in Android are slow, instrumentation tests and/or tests that rely on third-party frameworks like Roboletric. The Square Way was supposed to help us write fast unit tests that didn&rsquo;t rely on any third-party frameworks.
Now that we&rsquo;ve discussed why unit testing in Android is so difficult and seen how The Square Way resolves those difficulties, we are finally in a position to assess The Square Way as a whole as a method of creating unit testable Android applications. That assessment is the subject of this article. My assessment consists of the following three claims:
  Removing all compile time dependencies on the Android SDK is not necessary for us write fast unit tests for Android. (Its also not really a practical thing to try to do anyway.)
  Provided that we redefine The Square Way so that it does not require us to remove compile-time dependencies on the Android SDK, the only problem that arises when trying to apply The Square Way is simply writing all of boilerplate code. Fortunately, much of this boilerplate can be written for us by Android Studio.
  Dependency Injection is really the main &ldquo;active ingredient&rdquo; that allows The Square Way enhance the unit testability of our applications.
 <span class="mldr">&mldr;</span></p></a><p class="note labels"><a class="category" href="/categories/Android/">Android</a><a class="tag" href="/tags/android/">android</a><a class="tag" href="/tags/testing/">testing</a></p></li></ul><div class="pagination">
    <ul><li><a class="" href="/tags/testing/">1</a></li><li><a class="" href="/tags/testing/page/2/">2</a></li><li><a class="" href="/tags/testing/page/3/">3</a></li><li><a class="active" href="/tags/testing/page/4/">4</a></li><li><a class="" href="/tags/testing/page/5/">5</a></li></ul>
</div></section><section id="footer"><div style="display: flex; flex-direction: row; justify-content: center;">
  <p>
    &copy; 2020 Matt Dupree
  </p>
</div>
</section><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/&#43;DiW/UqRcLbRjq" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l&#43;B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd&#43;qj&#43;o24G5ZU2zJz" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
            onload="renderMathInElement(document.body);"></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-63544399-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script src="/js/core.min.e824fe5a8e6cd5e2ac09542506ccf3c3ad34d1f7503ad17867ea48f453c8e1ea9f6dfda7691546f13c99136fd4a9bd13.js" integrity="sha384-6CT&#43;Wo5s1eKsCVQlBszzw6000fdQOtF4Z&#43;pI9FPI4eqfbf2naRVG8TyZE2/Uqb0T"></script></body>

</html>